C51 COMPILER V9.57.0.0   MAIN                                                              05/26/2025 23:37:18 PAGE 1   


C51 COMPILER V9.57.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: E:\Study\Keil\keil c51\KeilData\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND 
                    -PRINT(.\Listings\main.lst) OBJECT(.\Objects\main.obj)

line level    source

   1          #include <REGX52.H>
   2          #include "Delay.h"
   3          #include "Motor.h"
   4          #include "LCD1602.h"
   5          #include "ADC0832.h"
   6          #include "Key.h"
   7          
   8          #define uchar unsigned char
   9          
  10          uchar light_value; // 光照强度变量
  11          uchar threshold = 128; // 初始阈值
  12          
  13          /**
  14           * @brief 主函数
  15           */
  16          void main() {
  17   1          int last_key = NO_KEY_PRESSED;  // 上一次按键状态
  18   1      
  19   1          // 初始化ADC0832和LCD1602
  20   1          ADC0832_Init();
  21   1          LCD_Init();
  22   1      
  23   1          while (1) {
  24   2              int current_key = get_key_status();
  25   2              handle_key_events(&last_key, current_key, &threshold);
  26   2      
  27   2              // 读取光照强度
  28   2              light_value = ADC0832_ReadChannel(0); // 假设光照传感器连接到通道0
  29   2      
  30   2              // 根据光照强度与阈值的比较结果控制电机旋转
  31   2              if (light_value > threshold) {
  32   3                  step_motor(DIRECTION_CW);
  33   3              } else {
  34   3                  step_motor(DIRECTION_CCW);
  35   3              }
  36   2      
  37   2              // 在LCD1602上显示光照强度及阈值
  38   2              LCD_ShowString(1, 1, "Light:");
  39   2              LCD_ShowNum(1, 7, light_value, 3);
  40   2              LCD_ShowString(1, 10, "lux");
  41   2      
  42   2              LCD_ShowString(2, 1, "Thres:");
  43   2              LCD_ShowNum(2, 7, threshold, 3);
  44   2              LCD_ShowString(2, 10, "lux");
  45   2          }
  46   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    149    ----
   CONSTANT SIZE    =     18    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      2       4
C51 COMPILER V9.57.0.0   MAIN                                                              05/26/2025 23:37:18 PAGE 2   

   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
